<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mushroom Village ğŸ„</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <h1>ğŸ„ Mushroom Village</h1>
      <div class="connection-status">
        <span id="status-indicator" class="status-dot"></span>
        <span id="status-text">Connecting...</span>
      </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
      <!-- Chat Pane (Left Side) -->
      <div class="chat-pane">
        <div class="village-bell">
          <div class="bell-item">
            <span class="bell-label">Quest:</span>
            <span id="bell-quest">Loading...</span>
          </div>
          <div class="bell-item">
            <span class="bell-label">Vote:</span>
            <span id="bell-vote">None</span>
          </div>
          <div class="bell-item">
            <span class="bell-label">Action:</span>
            <span id="bell-action">Explore the village</span>
          </div>
        </div>

        <div id="chat-messages" class="chat-messages"></div>

        <div class="chat-composer">
          <div class="composer-hints">
            Commands: <code>/gather moss</code> â€¢ <code>/donate moss x5</code> â€¢ <code>/vote option</code> â€¢ <code>/offer give moss x3 for cedar x1</code>
          </div>
          <div class="input-group">
            <input 
              type="text" 
              id="message-input" 
              placeholder="Type a message or command..." 
              autocomplete="off"
            >
            <button id="send-button">Send</button>
          </div>
        </div>
      </div>

      <!-- Side Panels (Right Side) -->
      <div class="side-panels">
        <!-- Player Inventory Panel -->
        <div class="panel inventory-panel">
          <h3>ğŸ’ Your Inventory</h3>
          <div id="inventory-content">
            <div class="inventory-item">
              <div class="item-header">
                <span class="item-icon">ğŸŒ¿</span>
                <span class="item-name">Moss</span>
                <span class="item-qty" id="inv-moss">0</span>
              </div>
              <div class="item-actions">
                <button class="pixel-btn gather-btn" onclick="client.quickGather('moss')">Gather</button>
                <button class="pixel-btn donate-btn" onclick="client.quickDonate('moss')">Donate</button>
              </div>
            </div>
            <div class="inventory-item">
              <div class="item-header">
                <span class="item-icon">ğŸªµ</span>
                <span class="item-name">Cedar</span>
                <span class="item-qty" id="inv-cedar">0</span>
              </div>
              <div class="item-actions">
                <button class="pixel-btn gather-btn" onclick="client.quickGather('cedar')">Gather</button>
                <button class="pixel-btn donate-btn" onclick="client.quickDonate('cedar')">Donate</button>
              </div>
            </div>
            <div class="inventory-item">
              <div class="item-header">
                <span class="item-icon">ğŸ’§</span>
                <span class="item-name">Resin</span>
                <span class="item-qty" id="inv-resin">0</span>
              </div>
              <div class="item-actions">
                <button class="pixel-btn gather-btn" onclick="client.quickGather('resin')">Gather</button>
                <button class="pixel-btn donate-btn" onclick="client.quickDonate('resin')">Donate</button>
              </div>
            </div>
            <div class="inventory-item">
              <div class="item-header">
                <span class="item-icon">ğŸ„</span>
                <span class="item-name">Spores</span>
                <span class="item-qty" id="inv-spores">0</span>
              </div>
              <div class="item-actions">
                <button class="pixel-btn gather-btn" onclick="client.quickGather('spores')">Gather</button>
                <button class="pixel-btn donate-btn" onclick="client.quickDonate('spores')">Donate</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Quest Panel -->
        <div class="panel quest-panel">
          <h3>ğŸ¯ Active Quest</h3>
          <div id="quest-content">
            <p class="panel-empty">No active quest</p>
          </div>
        </div>

        <!-- Vote Panel -->
        <div class="panel vote-panel">
          <h3>ğŸ—³ï¸ Active Vote</h3>
          <div id="vote-content">
            <p class="panel-empty">No active vote</p>
          </div>
        </div>

        <!-- Stockpile Panel -->
        <div class="panel stockpile-panel">
          <h3>ğŸ“¦ Village Stockpile</h3>
          <div id="stockpile-content">
            <div class="resource-item">
              <span class="resource-name">Moss:</span>
              <span class="resource-qty" id="stock-moss">0</span>
            </div>
            <div class="resource-item">
              <span class="resource-name">Cedar:</span>
              <span class="resource-qty" id="stock-cedar">0</span>
            </div>
            <div class="resource-item">
              <span class="resource-name">Resin:</span>
              <span class="resource-qty" id="stock-resin">0</span>
            </div>
            <div class="resource-item">
              <span class="resource-name">Spores:</span>
              <span class="resource-qty" id="stock-spores">0</span>
            </div>
          </div>
        </div>

        <!-- Trades Panel -->
        <div class="panel trades-panel">
          <h3>ğŸ¤ Trading Board</h3>
          
          <!-- Trade Creator -->
          <div class="trade-creator">
            <div class="trade-row">
              <span class="trade-label">Give:</span>
              <select id="give-item" class="pixel-select">
                <option value="moss">ğŸŒ¿ Moss</option>
                <option value="cedar">ğŸªµ Cedar</option>
                <option value="resin">ğŸ’§ Resin</option>
                <option value="spores">ğŸ„ Spores</option>
              </select>
              <input type="number" id="give-qty" class="pixel-input" min="1" value="1">
            </div>
            <div class="trade-row">
              <span class="trade-label">For:</span>
              <select id="want-item" class="pixel-select">
                <option value="moss">ğŸŒ¿ Moss</option>
                <option value="cedar">ğŸªµ Cedar</option>
                <option value="resin">ğŸ’§ Resin</option>
                <option value="spores">ğŸ„ Spores</option>
              </select>
              <input type="number" id="want-qty" class="pixel-input" min="1" value="1">
            </div>
            <button class="pixel-btn create-offer-btn" onclick="client.createTradeOffer()">Create Offer</button>
          </div>
          
          <div id="trades-content">
            <p class="panel-empty">No open trades</p>
          </div>
        </div>

        <!-- Memory Stones Panel -->
        <div class="panel stones-panel">
          <h3>ğŸª¨ Memory Stones</h3>
          <div id="stones-content">
            <p class="panel-empty">Loading...</p>
          </div>
        </div>

        <!-- Private Messages Panel -->
        <div class="panel dm-panel">
          <h3>ğŸ“œ Elder's Messages <span id="dm-badge" class="dm-badge" style="display: none;">0</span></h3>
          <div id="dm-content">
            <p class="panel-empty">No private messages</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Registration Modal -->
  <div id="registration-modal" class="modal">
    <div class="modal-content">
      <h2>Welcome to Mushroom Village</h2>
      <p>What is your name, traveler?</p>
      <input 
        type="text" 
        id="player-name-input" 
        placeholder="Enter your name" 
        maxlength="20"
      >
      <button id="register-button">Enter Village</button>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
